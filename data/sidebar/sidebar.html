<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hotdish</title>
    <link href="css/style.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <script src="../channels/channels.js"></script>
    <script src="js/jquery-1.10.2.min.js"></script>
    <script src="js/util.js"></script>
    <script src="js/sidebar-debug.js"></script>
    <script src="js/sidebar.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/collapse.js"></script>
    <script src="js/transition.js"></script>
    <script src="js/angular.min.js"></script>
    <script src="js/app.js"></script>

    <script>


var interval_1 = setInterval(function(){
  console.log("interval!");
  var s, msgtype;

  s = angular.element("#messagestream").scope();
  if (s._mess.length > 6) {
    s._mess.shift();
  }

  msgtype = ['part','join'][~~(Date.now()%2)];
  s._mess.push({type:msgtype, message: "wut at: "+Date.now()});
  //s.$apply();
  s.$emit("outsideMessage")
},500);


stop_fake = function(){
  clearInterval(interval_1)
}


    </script>


<!-- you want templates in here instead?  FINE -->
 <script type="text/ng-template" id="/templates/partmessage.html">
PARTING {{message}}
</script>

 <script type="text/ng-template" id="/templates/partmessage.html">
PARTING {{message}}
</script>


  </head>

  <body ng-app="hotdishSidebar" class="sidepanel">  <!-- START SIDEBAR -->
    <div id="main-content" ng-controller="hotdishController">
      <div id="content">
        <input id="chat" placeholder="Send a message">

        <h6 class="text-muted">Participants</h6>

        <!-- peers -->
        <ul id="peers">
          <!-- peer -->
          <li ng-repeat="peer in peers">
            {{peer.name}}
            <img src="{{peer.avatar}}" />
          </li>
        </ul>

        <ul id="messagestream" ng-mouseover="msgPause()" ng-mouseleave="msgResume()">
          <!-- messages -->
          <li ng-repeat="msg in messages" ng-switch="msg.type">
            <message ng-switch-when="join" message={{msg.message}} />
            <message ng-switch-when="part" message={{msg.message}} />
            <message ng-switch-default message={{msg.message}} />

          </li>
        </ul>

        <ul id="peers">
        </ul>

        <!-- FIX ME: Do we need this?  Can we hide this?  or is this just for testing? -->
        <div id="messages-container" style="display: none">
          <header>
            <button id="hide-messages">-</button>
            Messages:
          </header>
          <ul id="messages">
          </ul>
        </div>
        <div id="messages-hidden">
          <!-- <button id="show-messages">Show messages</button> -->
        </div>


        <!------------------------------
          Templates
          -->
        <div style="display: none">
          <li id="template-message">
            <pre></pre>
          </li>

          <li id="template-peer" class="peer panel panel-default"> <!-- START Person box -->
            <header class="bgcolor panel-heading"> <!-- Start Panel header -->
              <img class='pull-left avatar' src=""></img>
              <h3 class="name panel-title"></h3>
              <!-- <button type="button" class="btn btn-default btn-xs pull-right btn-minimize">
                <span class="glyphicon glyphicon-minus"></span>
              </button> -->
            </header> <!-- End Panel header -->
            <div class="panel-body"> <!-- START Activity List -->
              <!-- <h6></small>Open tabs:</small></h6> -->
              <ul class="url-list">
                <!-- <span class="no-page-list text-muted">No tabs open.</span> -->
              </ul>
            </div> <!-- End Activity List -->
          </li> <!-- End Person box -->
          <li id="template-tab" class="tab">
            <a class="normal" href="#" target="_blank"><img class="favicon" src="" style="height: 16px; width: 16px;">
              <span class="title"></span>
              <a href="#" data-placement="top" class="mirror link btn btn-default btn-xs pull-right" data-original-title="Start a session looking at exactly what the other person sees"><span class="glyphicon glyphicon-log-in"></span></a>
              <a href="#" data-placement="top" class="request-current push link btn btn-default btn-xs pull-right" data-original-title="Push this current tab you're on to the other participants."><span class="glyphicon glyphicon-share-alt"> <span class="push-btn-txt"></span></span></a>
            </a>
          </li>
        </div>
      </div>

      <p id="email-feedback" class="email-feedback text-left">
        <a href="mailto:hotdish@mozilla.com?Subject=Hotdish feedback"><span class="glyphicon glyphicon-send"></span> Email feedback</a>
      </p>

    </div><!-- /#main-content -->


    <!-- Debugging; only shown in content -->
    <div id="debug-panel-container">
      <div id="debug-panel">
        <fieldset>
          <legend>
            Add a tab
          </legend>
          <input type="text" id="add-tab-url" value="http://google.com" style="width: 20em">
          <input type="text" id="add-tab-tabid" value="1234" style="width: 4em">
          <label for="add-tab-local">Local? <input type="checkbox" id="add-tab-local"></label>
          <button id="add-tab">Add</button>
        </fieldset>

        <fieldset>
          <legend>
          Add a person
          </legend>
          <input type="text" id="add-person-name" value="Jane Doe" style="width: 20em">
          <button id="add-person">Add</button>
        </fieldset>
      </div>
    </div>

  </body> <!-- END SIDEBAR -->
</html>
